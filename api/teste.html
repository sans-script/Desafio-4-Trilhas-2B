<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>TICS na Educação - Panorama Geral</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    rel="stylesheet"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Open+Sans&display=swap"
    rel="stylesheet"
  />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: "Open Sans", sans-serif;
      background-color: #f1f5f6;
    }
    .font-montserrat {
      font-family: "Montserrat", sans-serif;
    }
    /* Fix canvas height to prevent infinite growth */
    canvas {
      display: block;
      max-width: 100%;
      height: 112px !important; /* 28 * 4 (tailwind h-28 = 7rem = 112px) */
    }
    #barChart {
      max-width: 150px;
      height: 112px !important;
    }
    #doughnutChart {
      width: 96px !important; /* 24 * 4 = 96px */
      height: 96px !important;
    }
  </style>
</head>
<body>
  <div class="max-w-6xl mx-auto p-4">
    <!-- Header -->
    <header
      class="bg-[#2f4f74] rounded-md text-white px-6 py-4 flex flex-col sm:flex-row sm:items-center sm:justify-between"
    >
      <h1
        class="font-montserrat font-extrabold text-[15px] uppercase tracking-widest"
      >
        TICS NA EDUCAÇÃO
        <span class="font-normal uppercase tracking-normal text-[12px] ml-1"
          >- PANORAMA GERAL</span
        >
      </h1>
      <div
        class="flex flex-col sm:flex-row sm:space-x-12 mt-3 sm:mt-0 text-[11px] font-semibold"
      >
        <div class="text-center sm:text-left">
          <div class="text-[10px] font-normal">Total de Escolas</div>
          <div>1.0000</div>
        </div>
        <div class="text-center sm:text-left">
          <div class="text-[10px] font-normal">Escolas Rurais</div>
          <div>000%</div>
        </div>
        <div class="text-center sm:text-left">
          <div class="text-[10px] font-normal">Escolas Urbanas</div>
          <div>000%</div>
        </div>
      </div>
    </header>
    <!-- Filters -->
    <div class="flex flex-wrap gap-3 mt-4">
      <select
        aria-label="Ano"
        class="border border-gray-300 rounded px-3 py-1 text-[11px] font-semibold"
      >
        <option>2024</option>
      </select>
      <select
        aria-label="Anos Iniciais"
        class="border border-gray-300 rounded px-3 py-1 text-[11px] font-semibold"
      >
        <option>Anos Iniciais</option>
      </select>
      <select
        aria-label="Municipal"
        class="border border-gray-300 rounded px-3 py-1 text-[11px] font-semibold"
      >
        <option>Municipal</option>
      </select>
    </div>
    <!-- Cards grid -->
    <div
      class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4 min-h-[180px]"
      style="min-height: 180px"
    >
      <!-- Computadores por aluno -->
      <div
        class="bg-white rounded-md shadow-sm p-3 text-[11px] font-semibold flex flex-col"
      >
        <div class="mb-2">Computadores por aluno</div>
        <canvas
          id="barChart"
          aria-label="Bar chart representing computadores por aluno"
          role="img"
        ></canvas>
      </div>
      <!-- Computadores administrativos -->
      <div
        class="bg-white rounded-md shadow-sm p-3 text-[11px] font-semibold flex flex-col items-center"
      >
        <div class="mb-2 self-start">Computadores administrativos</div>
        <canvas
          id="doughnutChart"
          aria-label="Doughnut chart representing computadores administrativos"
          role="img"
        ></canvas>
      </div>
      <!-- Rendimento Escolar -->
      <div class="bg-white rounded-md shadow-sm p-3 text-[11px] font-semibold">
        <div class="mb-2">Rendimento Escolar</div>
        <canvas
          id="areaChart"
          aria-label="Area chart representing rendimento escolar"
          role="img"
        ></canvas>
      </div>
      <!-- Distorção de Idade -->
      <div class="bg-white rounded-md shadow-sm p-3 text-[11px] font-semibold">
        <div class="mb-2">Distorção de Idade</div>
        <canvas
          id="lineChart"
          aria-label="Line chart representing distorção de idade"
          role="img"
        ></canvas>
      </div>
    </div>
  </div>

  <script>
    // Destroy charts if they exist to prevent duplicates (optional if you plan to re-run)
    if (window.barChartInstance) window.barChartInstance.destroy();
    if (window.doughnutChartInstance) window.doughnutChartInstance.destroy();
    if (window.areaChartInstance) window.areaChartInstance.destroy();
    if (window.lineChartInstance) window.lineChartInstance.destroy();

    // Bar chart - Computadores por aluno
    const barCtx = document.getElementById("barChart").getContext("2d");
    window.barChartInstance = new Chart(barCtx, {
      type: "bar",
      data: {
        labels: ["A", "B"],
        datasets: [
          {
            label: "Computadores por aluno",
            data: [50, 40],
            backgroundColor: ["#3b82f6", "#a855f7"],
            borderRadius: 3,
            barPercentage: 0.6,
          },
        ],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: {
            display: false,
          },
          y: {
            display: false,
            beginAtZero: true,
            max: 60,
          },
        },
        plugins: {
          legend: {
            display: false,
          },
          tooltip: {
            enabled: false,
          },
        },
      },
    });

    // Doughnut chart - Computadores administrativos
    const doughnutCtx = document
      .getElementById("doughnutChart")
      .getContext("2d");
    window.doughnutChartInstance = new Chart(doughnutCtx, {
      type: "doughnut",
      data: {
        labels: ["Blue", "Purple"],
        datasets: [
          {
            data: [60, 40],
            backgroundColor: ["#3b82f6", "#a855f7"],
            borderWidth: 0,
          },
        ],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        cutout: "70%",
        plugins: {
          legend: {
            display: false,
          },
          tooltip: {
            enabled: false,
          },
        },
      },
    });

    // Area chart - Rendimento Escolar
    const areaCtx = document.getElementById("areaChart").getContext("2d");
    const gradientPink = areaCtx.createLinearGradient(0, 0, 0, 112);
    gradientPink.addColorStop(0, "rgba(168, 85, 247, 0.7)");
    gradientPink.addColorStop(1, "rgba(168, 85, 247, 0.1)");

    const gradientPurple = areaCtx.createLinearGradient(0, 0, 0, 112);
    gradientPurple.addColorStop(0, "rgba(59, 130, 246, 0.7)");
    gradientPurple.addColorStop(1, "rgba(59, 130, 246, 0.1)");

    window.areaChartInstance = new Chart(areaCtx, {
      type: "line",
      data: {
        labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
        datasets: [
          {
            label: "Rendimento",
            data: [60, 40, 50, 55, 60, 65],
            fill: true,
            backgroundColor: gradientPink,
            borderColor: "#a855f7",
            tension: 0.4,
            pointRadius: 0,
          },
          {
            label: "Aprovação",
            data: [50, 35, 45, 50, 55, 60],
            fill: true,
            backgroundColor: gradientPurple,
            borderColor: "#3b82f6",
            tension: 0.4,
            pointRadius: 0,
          },
        ],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: {
            grid: {
              display: false,
            },
            ticks: {
              color: "#000000",
              font: {
                size: 10,
              },
            },
          },
          y: {
            display: false,
            beginAtZero: true,
            max: 80,
          },
        },
        plugins: {
          legend: {
            display: false,
          },
          tooltip: {
            enabled: false,
          },
        },
        elements: {
          line: {
            borderWidth: 2,
          },
        },
      },
    });

    // Line chart - Distorção de Idade
    const lineCtx = document.getElementById("lineChart").getContext("2d");
    window.lineChartInstance = new Chart(lineCtx, {
      type: "line",
      data: {
        labels: [
          "Jan",
          "Feb",
          "Mar",
          "Apr",
          "May",
          "Jun",
          "Jul",
          "Aug",
          "Sep",
          "Oct",
          "Nov",
          "Dec",
        ],
        datasets: [
          {
            label: "Linha Azul",
            data: [20, 25, 22, 30, 28, 35, 33, 37, 40, 38, 35, 30],
            borderColor: "#3b82f6",
            backgroundColor: "transparent",
            tension: 0.3,
            pointRadius: 3,
            pointBackgroundColor: "#3b82f6",
            fill: false,
          },
          {
            label: "Linha Roxa",
            data: [15, 18, 16, 20, 22, 25, 23, 27, 25, 22, 20, 18],
            borderColor: "#a855f7",
            backgroundColor: "transparent",
            tension: 0.3,
            pointRadius: 3,
            pointBackgroundColor: "#a855f7",
            fill: false,
          },
        ],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: {
            grid: {
              display: false,
            },
            ticks: {
              color: "#000000",
              font: {
                size: 10,
              },
            },
          },
          y: {
            display: false,
            beginAtZero: true,
            max: 45,
          },
        },
        plugins: {
          legend: {
            display: false,
          },
          tooltip: {
            enabled: false,
          },
        },
        elements: {
          line: {
            borderWidth: 2,
          },
        },
      },
    });
  </script>
</body>
</html>